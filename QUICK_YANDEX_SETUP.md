# üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ø–Ω–¥–µ–∫—Å OAuth

## ‚ö° –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞ 5 –º–∏–Ω—É—Ç

### 1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –Ø–Ω–¥–µ–∫—Å OAuth
- –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ [https://oauth.yandex.ru/](https://oauth.yandex.ru/)
- –ù–∞–∂–∞—Ç—å "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å:
  - **–ù–∞–∑–≤–∞–Ω–∏–µ**: SELEXIA Travel
  - **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: –í–µ–±-—Å–µ—Ä–≤–∏—Å—ã
  - **Callback URL**: `http://localhost:8000/accounts/yandex/login/callback/`
  - **–ü—Ä–∞–≤–∞**: `login:info`, `login:email`

### 2. –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª
```env
YANDEX_CLIENT_ID=–≤–∞—à-client-id-–æ—Ç-—è–Ω–¥–µ–∫—Å
YANDEX_CLIENT_SECRET=–≤–∞—à-client-secret-–æ—Ç-—è–Ω–¥–µ–∫—Å
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```bash
python manage.py runserver
```

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

- ‚úÖ Django Allauth –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ø–Ω–¥–µ–∫—Å –¥–æ–±–∞–≤–ª–µ–Ω
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —à–∞–±–ª–æ–Ω—ã
- ‚úÖ URL-–º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤—ã

## üß™ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:8000/accounts/signup/`
2. –£–≤–∏–¥–µ—Ç—å –∫–Ω–æ–ø–∫—É "–Ø–Ω–¥–µ–∫—Å"
3. –ù–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –Ø–Ω–¥–µ–∫—Å OAuth

## üö® –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—à–∏–±–∫–∞ "invalid_scope"
- **–ü—Ä–∏—á–∏–Ω–∞**: –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –Ø–Ω–¥–µ–∫—Å OAuth —É–∫–∞–∑–∞–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- **–†–µ—à–µ–Ω–∏–µ**: –£–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ `login:info` –∏ `login:email` (–±–µ–∑ `login:avatar`, `login:birthday`)

### –û—à–∏–±–∫–∞ "MultipleObjectsReturned"
- **–ü—Ä–∏—á–∏–Ω–∞**: –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Yandex OAuth
- **–†–µ—à–µ–Ω–∏–µ**: –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### –û–±—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Client ID –∏ Secret –≤ .env
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ callback URL –≤ –Ø–Ω–¥–µ–∫—Å OAuth –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: `http://localhost:8000/accounts/yandex/login/callback/`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Django
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Django —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ scope: `['login:info', 'login:email']`

---

**–ì–æ—Ç–æ–≤–æ!** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –≤—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å –∞–∫–∫–∞—É–Ω—Ç—ã.
